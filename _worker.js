const a0_0x2fd172=a0_0x337e;(function(_0x355adf,_0xa3df28){const _0x43b728=a0_0x337e,_0x1e5604=_0x355adf();while(!![]){try{const _0x2db6c9=parseInt(_0x43b728(0x288))/0x1*(-parseInt(_0x43b728(0x27c))/0x2)+-parseInt(_0x43b728(0x225))/0x3*(-parseInt(_0x43b728(0x200))/0x4)+-parseInt(_0x43b728(0x2af))/0x5*(-parseInt(_0x43b728(0x237))/0x6)+-parseInt(_0x43b728(0x1f1))/0x7*(parseInt(_0x43b728(0x2a4))/0x8)+parseInt(_0x43b728(0x2a6))/0x9+parseInt(_0x43b728(0x25c))/0xa*(parseInt(_0x43b728(0x23f))/0xb)+-parseInt(_0x43b728(0x26a))/0xc;if(_0x2db6c9===_0xa3df28)break;else _0x1e5604['push'](_0x1e5604['shift']());}catch(_0x599aef){_0x1e5604['push'](_0x1e5604['shift']());}}}(a0_0x4754,0xb3348));import{connect}from'cloudflare:sockets';let userID=a0_0x2fd172(0x255);const proxyIPs=['cdn.xn--b6gac.eu.org','cdn-all.xn--b6gac.eu.org','workers.cloudflare.cyou'];let proxyIP=proxyIPs[Math[a0_0x2fd172(0x239)](Math['random']()*proxyIPs['length'])],socks5Address='',socks5Relay=![];if(!isValidUUID(userID))throw new Error('uuid\x20is\x20not\x20valid');let parsedSocks5Address={},enableSocks=![];export default{async 'fetch'(_0xce690f,_0x19bc6a,_0x3d796c){const _0x3c61c6=a0_0x2fd172;try{const {UUID:_0x52efa4,PROXYIP:_0x3c2ad1,SOCKS5:_0x20e7cb,SOCKS5_RELAY:_0x1698b8}=_0x19bc6a;userID=_0x52efa4||userID,proxyIP=_0x3c2ad1||proxyIP,socks5Address=_0x20e7cb||socks5Address,socks5Relay=_0x1698b8||socks5Relay;if(socks5Address)try{parsedSocks5Address=socks5AddressParser(socks5Address),enableSocks=!![];}catch(_0x6a6e38){console[_0x3c61c6(0x211)](_0x6a6e38['toString']()),enableSocks=![];}const _0x17184c=userID[_0x3c61c6(0x2ca)](',')?userID[_0x3c61c6(0x2b6)](',')[0x0]:userID,_0x5fefd6=new URL(_0xce690f[_0x3c61c6(0x270)]),_0x437997=_0xce690f[_0x3c61c6(0x228)][_0x3c61c6(0x23b)]('Host');if(_0xce690f['headers']['get'](_0x3c61c6(0x2a9))!=='websocket')switch(_0x5fefd6['pathname']){case _0x3c61c6(0x22b):return new Response(JSON[_0x3c61c6(0x206)](_0xce690f['cf'],null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x3c61c6(0x229)}});case'/'+_0x17184c:return new Response(getConfig(userID,_0x437997),{'status':0xc8,'headers':{'Content-Type':_0x3c61c6(0x29b)}});case _0x3c61c6(0x23c)+_0x17184c:return new Response(btoa(GenSub(userID,_0x437997)),{'status':0xc8,'headers':{'Content-Type':_0x3c61c6(0x2b7)}});case _0x3c61c6(0x292)+_0x17184c:return fetch('https://sub.xf.free.hr/auto?host='+_0x437997+'&uuid='+userID+_0x3c61c6(0x2d2),{'headers':_0xce690f[_0x3c61c6(0x228)]});default:return handleDefaultPath(_0x5fefd6,_0xce690f);}else return await ProtocolOverWSHandler(_0xce690f);}catch(_0x10ba32){return new Response(_0x10ba32['toString']());}}};function a0_0x337e(_0x33e25d,_0x12b80d){const _0x4754ee=a0_0x4754();return a0_0x337e=function(_0x337e29,_0x4d4316){_0x337e29=_0x337e29-0x1ee;let _0x206c31=_0x4754ee[_0x337e29];return _0x206c31;},a0_0x337e(_0x33e25d,_0x12b80d);}async function handleDefaultPath(_0x54117a,_0xf18416){const _0x5c39e1=a0_0x2fd172,_0x4b9fa3=hostnames[Math['floor'](Math[_0x5c39e1(0x296)]()*hostnames[_0x5c39e1(0x202)])],_0x43ee84=new Headers(_0xf18416[_0x5c39e1(0x228)]);_0x43ee84['set'](_0x5c39e1(0x1fa),_0x5c39e1(0x271)),_0x43ee84[_0x5c39e1(0x205)](_0x5c39e1(0x2bf),_0x5c39e1(0x271)),_0x43ee84['set'](_0x5c39e1(0x297),_0x5c39e1(0x271)),_0x43ee84[_0x5c39e1(0x205)](_0x5c39e1(0x20d),'https://www.google.com/search?q=edtunnel');const _0x189128='https://'+_0x4b9fa3+_0x54117a[_0x5c39e1(0x279)]+_0x54117a[_0x5c39e1(0x251)],_0x118451=new Request(_0x189128,{'method':_0xf18416[_0x5c39e1(0x22c)],'headers':_0x43ee84,'body':_0xf18416[_0x5c39e1(0x2aa)],'redirect':'manual'}),_0x43b1df=await fetch(_0x118451,{'redirect':_0x5c39e1(0x254)});if([0x12d,0x12e][_0x5c39e1(0x2ca)](_0x43b1df[_0x5c39e1(0x26c)]))return new Response(_0x5c39e1(0x284)+_0x4b9fa3+_0x5c39e1(0x281),{'status':0x193,'statusText':_0x5c39e1(0x278)});return _0x43b1df;}async function ProtocolOverWSHandler(_0x4e3290){const _0x142535=a0_0x2fd172,_0x590b62=new WebSocketPair(),[_0x4796d1,_0x120cea]=Object['values'](_0x590b62);_0x120cea[_0x142535(0x2b0)]();let _0x3a617b='',_0x4043a2='';const _0x39dc7e=(_0x22b563,_0x252f00)=>{const _0x3823ec=_0x142535;console[_0x3823ec(0x211)]('['+_0x3a617b+':'+_0x4043a2+']\x20'+_0x22b563,_0x252f00||'');},_0x1973cd=_0x4e3290[_0x142535(0x228)][_0x142535(0x23b)]('sec-websocket-protocol')||'',_0x16004e=makeReadableWebSocketStream(_0x120cea,_0x1973cd,_0x39dc7e);let _0x7f8b4b={'value':null},_0x44dfa0=![];return _0x16004e[_0x142535(0x1f6)](new WritableStream({async 'write'(_0x15472a,_0x4db5b3){const _0x512b77=_0x142535;if(_0x44dfa0)return await handleDNSQuery(_0x15472a,_0x120cea,null,_0x39dc7e);if(_0x7f8b4b[_0x512b77(0x230)]){const _0x2b8cc2=_0x7f8b4b['value'][_0x512b77(0x227)][_0x512b77(0x1f0)]();await _0x2b8cc2[_0x512b77(0x219)](_0x15472a),_0x2b8cc2['releaseLock']();return;}const {hasError:_0x41f544,message:_0x4ef1e6,addressType:_0x277bac,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x4b75de,ProtocolVersion:ProtocolVersion=new Uint8Array([0x0,0x0]),isUDP:_0xd8c006}=processProtocolHeader(_0x15472a,userID);_0x3a617b=addressRemote,_0x4043a2=portRemote+'--'+Math[_0x512b77(0x296)]()+'\x20'+(_0xd8c006?_0x512b77(0x275):_0x512b77(0x273))+'\x20';if(_0x41f544){throw new Error(_0x4ef1e6);return;}if(_0xd8c006){if(portRemote===0x35)_0x44dfa0=!![];else{throw new Error(_0x512b77(0x293));return;}}const _0x2d72c8=new Uint8Array([ProtocolVersion[0x0],0x0]),_0x331cff=_0x15472a[_0x512b77(0x287)](_0x4b75de);if(_0x44dfa0)return handleDNSQuery(_0x331cff,_0x120cea,_0x2d72c8,_0x39dc7e);handleTCPOutBound(_0x7f8b4b,_0x277bac,addressRemote,portRemote,_0x331cff,_0x120cea,_0x2d72c8,_0x39dc7e);},'close'(){const _0x148020=_0x142535;_0x39dc7e(_0x148020(0x259));},'abort'(_0x32e847){_0x39dc7e('readableWebSocketStream\x20is\x20abort',JSON['stringify'](_0x32e847));}}))[_0x142535(0x1ee)](_0x361cd6=>{const _0x3f8655=_0x142535;_0x39dc7e(_0x3f8655(0x267),_0x361cd6);}),new Response(null,{'status':0x65,'webSocket':_0x4796d1});}async function trojanOverWSHandler(_0xe97f25){const _0x6a3138=a0_0x2fd172,_0x474bf9=new WebSocketPair(),[_0x2a5019,_0x510900]=Object[_0x6a3138(0x23d)](_0x474bf9);_0x510900[_0x6a3138(0x2b0)]();let _0x460d7b='',_0x24ecb2='';const _0x1cc80b=(_0x3d5459,_0x2afea8)=>{console['log']('['+_0x460d7b+':'+_0x24ecb2+']\x20'+_0x3d5459,_0x2afea8||'');},_0x46f2da=_0xe97f25[_0x6a3138(0x228)][_0x6a3138(0x23b)](_0x6a3138(0x244))||'',_0x4a59c7=makeReadableWebSocketStream(_0x510900,_0x46f2da,_0x1cc80b);let _0x9e1efd={'value':null},_0x21865e=null;return _0x4a59c7['pipeTo'](new WritableStream({async 'write'(_0xa3ca7d,_0xdc61f9){const _0x159dd4=_0x6a3138;if(_0x21865e)return _0x21865e(_0xa3ca7d);if(_0x9e1efd[_0x159dd4(0x230)]){const _0x2d69c7=_0x9e1efd['value'][_0x159dd4(0x227)][_0x159dd4(0x1f0)]();await _0x2d69c7[_0x159dd4(0x219)](_0xa3ca7d),_0x2d69c7['releaseLock']();return;}const {hasError:_0x3264b2,message:_0x2aa6ae,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawClientData:_0xc97d39,addressType:_0x28d855}=await parseTrojanHeader(_0xa3ca7d);_0x460d7b=addressRemote,_0x24ecb2=portRemote+'--'+Math[_0x159dd4(0x296)]()+'\x20tcp';if(_0x3264b2){throw new Error(_0x2aa6ae);return;}handleTCPOutBound(_0x9e1efd,addressRemote,portRemote,_0xc97d39,_0x510900,_0x1cc80b,_0x28d855);},'close'(){const _0x44ed51=_0x6a3138;_0x1cc80b(_0x44ed51(0x203));},'abort'(_0x509c27){const _0x135d67=_0x6a3138;_0x1cc80b('readableWebSocketStream\x20is\x20aborted',JSON[_0x135d67(0x206)](_0x509c27));}}))[_0x6a3138(0x1ee)](_0x5ef234=>{const _0x46aa7d=_0x6a3138;_0x1cc80b(_0x46aa7d(0x267),_0x5ef234);}),new Response(null,{'status':0x65,'webSocket':_0x2a5019});}function a0_0x4754(){const _0x52ad47=['byteLength','www.panda.tv','https://url.v1.mk/sub?target=clash&url=','remoteSocketToWS\x20error:','www.baidu.com','search','www.cnki.net','www.eyny.com','manual','d342d11e-d424-4583-b36e-524ab1f0afa4','weibo.com','no\x20acceptable\x20methods',')\x20tcp\x20is\x20close','readableWebSocketStream\x20is\x20close','www.ynet.com','www.xinhuanet.com','1990mFXTCM','encode','\x0a\x20\x20</body>\x0a\x20\x20<script>\x0a\x20\x20\x20\x20function\x20copyToClipboard(text)\x20{\x0a\x20\x20\x20\x20\x20\x20navigator.clipboard.writeText(text)\x0a\x20\x20\x20\x20\x20\x20\x20\x20.then(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alert(\x22Copied\x20to\x20clipboard\x22);\x0a\x20\x20\x20\x20\x20\x20\x20\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20.catch((err)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x22Failed\x20to\x20copy\x20to\x20clipboard:\x22,\x20err);\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20}\x0a\x20\x20</script>\x0a\x20\x20</html>','&path=%2F%3Fed%3D2048#','www.tmtpost.com','www.ttpaihang.com','?format=clash','Invalid\x20header\x20format\x20(missing\x20CR\x20LF)','-HTTPS-','www.ted.com','www.pconline.com.cn','readableWebSocketStream\x20pipeTo\x20error','addressValue\x20is\x20empty,\x20addressType\x20is\x20',',\x20has\x20to\x20be\x20none\x20or\x20tls.','25463892IoRicM','Invalid\x20password','status','network','socks\x20connection\x20opened','readable','url','1.2.3.4','The\x20Host\x20field\x20in\x20the\x20http\x20header\x20is\x20different\x20from\x20the\x20server\x20address,\x20this\x20is\x20unsupported\x20due\x20to\x20Cloudflare\x20API\x20restrictions','tcp\x20','www.taobao.com','udp\x20','padStart','replace','Forbidden','pathname','www.zhihu.com','\x22)\x27><i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copy</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','318706EJmlul','POST','Unknown\x20address\x20type:\x20','www.aliyun.com','please\x20provide\x20username/password','\x20are\x20not\x20allowed.','doh\x20success\x20and\x20dns\x20message\x20length\x20is\x20','https://','Redirects\x20to\x20','map','RUR0dW5uZWw=','slice','3BluYYA','enqueue','reverse','\x0a\x20\x20<body>\x0a\x20\x20\x20\x20','www.dianping.com','\x0a\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20<h1>EDtunnel:\x20Protocol\x20Configuration</h1>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22https://ipfs.io/ipfs/bafybeigd6i5aavwpr6wvnwuyayklq3omonggta4x2q7kpmgafj357nkcky\x22\x20alt=\x22EDtunnel\x20Logo\x22\x20class=\x22logo\x22>\x0a\x20\x20\x20\x20\x20\x20<p>Welcome!\x20This\x20function\x20generates\x20configuration\x20for\x20the\x20vless\x20protocol.\x20If\x20you\x20found\x20this\x20useful,\x20please\x20check\x20our\x20GitHub\x20project:</p>\x0a\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22https://github.com/6Kmfi6HP/EDtunnel\x22\x20target=\x22_blank\x22\x20style=\x22color:\x20#00ff00;\x22>EDtunnel\x20-\x20https://github.com/6Kmfi6HP/EDtunnel</a></p>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22clear:\x20both;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22btn-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22//','Invalid\x20URL\x20format','substring','join','\x20is\x20not\x20supported,\x20command\x2001-tcp,02-udp,03-mux','/bestip/','UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053','www.quyaoya.com','\x22\x20class=\x22btn\x22\x20target=\x22_blank\x22><i\x20class=\x22fas\x20fa-star\x22></i>\x20Best\x20IP\x20Subscription</a>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22subscription-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>Options\x20Explained:</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li><strong>VLESS\x20Subscription:</strong>\x20Direct\x20link\x20for\x20VLESS\x20protocol\x20configuration.\x20Suitable\x20for\x20clients\x20supporting\x20VLESS.</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li><strong>Clash\x20Subscription:</strong>\x20Opens\x20the\x20Clash\x20client\x20with\x20pre-configured\x20settings.\x20Best\x20for\x20Clash\x20users\x20on\x20mobile\x20devices.</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li><strong>Clash\x20Link:</strong>\x20A\x20web\x20link\x20to\x20convert\x20the\x20VLESS\x20config\x20to\x20Clash\x20format.\x20Useful\x20for\x20manual\x20import\x20or\x20troubleshooting.</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li><strong>Best\x20IP\x20Subscription:</strong>\x20Provides\x20a\x20curated\x20list\x20of\x20optimal\x20server\x20IPs\x20for\x20many\x20<b>different\x20countries</b>.</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Choose\x20the\x20option\x20that\x20best\x20fits\x20your\x20client\x20and\x20needs.\x20For\x20most\x20users,\x20the\x20VLESS\x20or\x20Clash\x20Subscription\x20will\x20be\x20the\x20easiest\x20to\x20use.</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','random','x-real-ip','DomainName','Stringified\x20UUID\x20is\x20invalid','www.qq.com','text/html;\x20charset=utf-8','www.hao123.com','www.aipai.com','invalid\x20data','connected\x20to\x20','trim','www.youzu.com','www.so.com','send','3807344iHENst','www.douyin.com','11145645OhWEel','www.360.cn','www.douban.com','Upgrade','body','QA==','sha224','sent\x20socks\x20greeting','error','287355vFjHMb','accept','\x0a\x20\x20<html>\x0a\x20\x20','IPv6','www.sohu.com','www.jianshu.com','charCodeAt','split','text/plain;charset=utf-8','test','fail\x20to\x20auth\x20socks\x20server','message','8.8.4.4','www.csdn.net','invalid\x20user','userID:\x20','x-forwarded-for','toLowerCase','\x22)\x27><i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copy</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>Best\x20IP\x20Configuration</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<pre><code>','www.jd.com','releaseLock','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x20config-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h2>UUID:\x20','</code></pre>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20copy-btn\x22\x20onclick=\x27copyToClipboard(\x22','from','command\x20','www.51cto.com','www.sina.com.cn','includes','www.tiktok.com','www.telegraph.co.uk','www.secoo.com','Unsupported\x20outbound\x20stream\x20method:\x20','Invalid\x20address\x20type:\x20','invalid\x20addressType:\x20','Invalid\x20SOCKS5\x20request\x20data','&path=/','catch','stack','getWriter','7gutmWO','www.881903.com','www.renren.com','www.hupu.com','security','pipeTo','toString','www.ctrip.com','www.xueqiu.com','cf-connecting-ip','://','www.cnzz.com','www.zhaopin.com','&fp=random&type=ws&host=','flatMap','1436FEeSMW','serverName','length','readableWebSocketStream\x20is\x20closed','www.qidian.com','set','stringify','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>Default\x20IP\x20Configuration</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<pre><code>','Invalid\x20data\x20length','www.zol.com.cn','www.youku.com','invild\x20\x20addressType\x20is\x20','retry\x20tcpSocket\x20closed\x20error','referer',')\x20tcp\x20is\x20abort','www.netease.com','www.imgo.tv','log','pop','some','www.cntv.cn','buffer','www.liepin.com','tlsSettings','close','write','getUint8','&insert=false&emoji=true&list=false&tfo=false&scv=true&fdn=false&sort=false&new_name=true','www.ximalaya.com','www.pptv.com','www.zhangzishi.cc','WebSocket\x20is\x20not\x20open','www.91.com','arrayBuffer','queryParams','www.cnblogs.com','\x20expected:\x205','9369UKaRfQ','www.bilibili.com','writable','headers','application/json;charset=utf-8','www.163.com','/cf','method','www.tudou.com','handleDNSQuery\x20have\x20exception,\x20error:\x20','\x0a\x20\x20<head>\x0a\x20\x20\x20\x20<title>EDtunnel:\x20Configuration</title>\x0a\x20\x20\x20\x20<meta\x20name=\x27viewport\x27\x20content=\x27width=device-width,\x20initial-scale=1\x27>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:site_name\x27\x20content=\x27EDtunnel:\x20Protocol\x20Configuration\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:type\x27\x20content=\x27website\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:title\x27\x20content=\x27EDtunnel\x20-\x20Protocol\x20Configuration\x20and\x20Subscribe\x20Output\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:description\x27\x20content=\x27Use\x20Cloudflare\x20Pages\x20and\x20Worker\x20serverless\x20to\x20implement\x20protocol\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:url\x27\x20content=\x27https://','value','socks\x20server\x20version\x20error:\x20','getUint16','finally','application/dns-message','No\x20incoming\x20data,\x20retrying','substr','42hBfQMN','sent\x20socks\x20request','floor','byteOffset','get','/sub/','values','www.mafengwo.cn','57937WzZmCR','none','addEventListener','wsSettings','www.xunlei.com','sec-websocket-protocol','Invalid\x20SOCKS\x20address\x20format','www.meituan.com','dns\x20server(','IPv4','readyState','?ed=2048','decode'];a0_0x4754=function(){return _0x52ad47;};return a0_0x4754();}async function handleTCPOutBound(_0x45ff61,_0x5328bc,_0xd7f0cf,_0x5356fe,_0x25434c,_0x31312f,_0x3a447c,_0x117747){async function _0x5cf23f(_0x5aada2,_0x57af43,_0xa320fe=![]){const _0x4db259=a0_0x337e;let _0x45a850;socks5Relay?_0x45a850=await socks5Connect(_0x5328bc,_0x5aada2,_0x57af43,_0x117747):_0x45a850=_0xa320fe?await socks5Connect(_0x5328bc,_0x5aada2,_0x57af43,_0x117747):connect({'hostname':_0x5aada2,'port':_0x57af43});_0x45ff61[_0x4db259(0x230)]=_0x45a850,_0x117747('connected\x20to\x20'+_0x5aada2+':'+_0x57af43);const _0x3e2d74=_0x45a850['writable'][_0x4db259(0x1f0)]();return await _0x3e2d74[_0x4db259(0x219)](_0x25434c),_0x3e2d74[_0x4db259(0x2c3)](),_0x45a850;}async function _0x3b1f15(){const _0x246c09=a0_0x337e;enableSocks?_0x442b56=await _0x5cf23f(_0xd7f0cf,_0x5356fe,!![]):_0x442b56=await _0x5cf23f(proxyIP||_0xd7f0cf,_0x5356fe),_0x442b56['closed'][_0x246c09(0x1ee)](_0x12be73=>{const _0xfd16f3=_0x246c09;console[_0xfd16f3(0x211)](_0xfd16f3(0x20c),_0x12be73);})[_0x246c09(0x233)](()=>{safeCloseWebSocket(_0x31312f);}),remoteSocketToWS(_0x442b56,_0x31312f,_0x3a447c,null,_0x117747);}let _0x442b56=await _0x5cf23f(_0xd7f0cf,_0x5356fe);remoteSocketToWS(_0x442b56,_0x31312f,_0x3a447c,_0x3b1f15,_0x117747);}function makeReadableWebSocketStream(_0x20def5,_0x5a2a7e,_0x2f7b57){let _0x10d759=![];const _0x435b4b=new ReadableStream({'start'(_0x4e1047){const _0x253e00=a0_0x337e;_0x20def5[_0x253e00(0x241)](_0x253e00(0x2ba),_0x80e89d=>{const _0xe7a8dc=_0x253e00,_0x44c850=_0x80e89d['data'];_0x4e1047[_0xe7a8dc(0x289)](_0x44c850);}),_0x20def5['addEventListener']('close',()=>{const _0x1c6adb=_0x253e00;safeCloseWebSocket(_0x20def5),_0x4e1047[_0x1c6adb(0x218)]();}),_0x20def5[_0x253e00(0x241)](_0x253e00(0x2ae),_0x524d78=>{const _0x1656a3=_0x253e00;_0x2f7b57('webSocketServer\x20has\x20error'),_0x4e1047[_0x1656a3(0x2ae)](_0x524d78);});const {earlyData:_0x1e5019,error:_0x354b58}=base64ToArrayBuffer(_0x5a2a7e);if(_0x354b58)_0x4e1047[_0x253e00(0x2ae)](_0x354b58);else _0x1e5019&&_0x4e1047['enqueue'](_0x1e5019);},'pull'(_0x4704b1){},'cancel'(_0x262f9f){_0x2f7b57('ReadableStream\x20was\x20canceled,\x20due\x20to\x20'+_0x262f9f),_0x10d759=!![],safeCloseWebSocket(_0x20def5);}});return _0x435b4b;}function processProtocolHeader(_0x4036e8,_0x3a528e){const _0x41e131=a0_0x2fd172;if(_0x4036e8[_0x41e131(0x24c)]<0x18)return{'hasError':!![],'message':_0x41e131(0x29e)};const _0x4b3cee=new DataView(_0x4036e8),_0x492e11=_0x4b3cee['getUint8'](0x0),_0x568f22=stringify(new Uint8Array(_0x4036e8[_0x41e131(0x287)](0x1,0x11))),_0x57062e=_0x3a528e['includes'](',')?_0x3a528e['split'](','):[_0x3a528e],_0x1752f5=_0x57062e[_0x41e131(0x213)](_0x237591=>_0x568f22===_0x237591[_0x41e131(0x2a0)]())||_0x57062e[_0x41e131(0x202)]===0x1&&_0x568f22===_0x57062e[0x0][_0x41e131(0x2a0)]();console[_0x41e131(0x211)](_0x41e131(0x2be)+_0x568f22);if(!_0x1752f5)return{'hasError':!![],'message':_0x41e131(0x2bd)};const _0x3ee1f0=_0x4b3cee[_0x41e131(0x21a)](0x11),_0x101d95=_0x4b3cee[_0x41e131(0x21a)](0x12+_0x3ee1f0);if(_0x101d95!==0x1&&_0x101d95!==0x2)return{'hasError':!![],'message':_0x41e131(0x2c7)+_0x101d95+_0x41e131(0x291)};const _0x7601d4=0x12+_0x3ee1f0+0x1,_0x4f254a=_0x4b3cee[_0x41e131(0x232)](_0x7601d4),_0x5d87e6=_0x4b3cee[_0x41e131(0x21a)](_0x7601d4+0x2);let _0x111c57,_0x210190,_0x52974f;switch(_0x5d87e6){case 0x1:_0x210190=0x4,_0x52974f=_0x7601d4+0x3,_0x111c57=new Uint8Array(_0x4036e8[_0x41e131(0x287)](_0x52974f,_0x52974f+_0x210190))[_0x41e131(0x290)]('.');break;case 0x2:_0x210190=_0x4b3cee[_0x41e131(0x21a)](_0x7601d4+0x3),_0x52974f=_0x7601d4+0x4,_0x111c57=new TextDecoder()[_0x41e131(0x24b)](_0x4036e8[_0x41e131(0x287)](_0x52974f,_0x52974f+_0x210190));break;case 0x3:_0x210190=0x10,_0x52974f=_0x7601d4+0x3,_0x111c57=Array[_0x41e131(0x2c6)]({'length':0x8},(_0x5b9da2,_0x44ce5b)=>_0x4b3cee[_0x41e131(0x232)](_0x52974f+_0x44ce5b*0x2)[_0x41e131(0x1f7)](0x10))[_0x41e131(0x290)](':');break;default:return{'hasError':!![],'message':_0x41e131(0x2d0)+_0x5d87e6};}if(!_0x111c57)return{'hasError':!![],'message':_0x41e131(0x268)+_0x5d87e6};return{'hasError':![],'addressRemote':_0x111c57,'addressType':_0x5d87e6,'portRemote':_0x4f254a,'rawDataIndex':_0x52974f+_0x210190,'protocolVersion':new Uint8Array([_0x492e11]),'isUDP':_0x101d95===0x2};}async function remoteSocketToWS(_0x1f881a,_0x43d2e5,_0x1ea870,_0x46c78b,_0x49354b){const _0x18858a=a0_0x2fd172;let _0x8b429e=![];try{await _0x1f881a['readable'][_0x18858a(0x1f6)](new WritableStream({async 'write'(_0x283c7d){const _0x1851e8=_0x18858a;if(_0x43d2e5[_0x1851e8(0x249)]!==WS_READY_STATE_OPEN)throw new Error(_0x1851e8(0x21f));_0x8b429e=!![],_0x1ea870?(_0x43d2e5['send'](await new Blob([_0x1ea870,_0x283c7d])[_0x1851e8(0x221)]()),_0x1ea870=null):_0x43d2e5['send'](_0x283c7d);},'close'(){_0x49354b('Remote\x20connection\x20readable\x20closed.\x20Had\x20incoming\x20data:\x20'+_0x8b429e);},'abort'(_0x2e8362){console['error']('Remote\x20connection\x20readable\x20aborted:',_0x2e8362);}}));}catch(_0x29f907){console[_0x18858a(0x2ae)](_0x18858a(0x24f),_0x29f907[_0x18858a(0x1ef)]||_0x29f907),safeCloseWebSocket(_0x43d2e5);}!_0x8b429e&&_0x46c78b&&(_0x49354b(_0x18858a(0x235)),await _0x46c78b());}function base64ToArrayBuffer(_0x242714){const _0x26f39d=a0_0x2fd172;if(!_0x242714)return{'earlyData':null,'error':null};try{_0x242714=_0x242714[_0x26f39d(0x277)](/-/g,'+')[_0x26f39d(0x277)](/_/g,'/');const _0x4c85eb=atob(_0x242714),_0x134dbe=new ArrayBuffer(_0x4c85eb[_0x26f39d(0x202)]),_0x14e441=new Uint8Array(_0x134dbe);for(let _0x1e641f=0x0;_0x1e641f<_0x4c85eb[_0x26f39d(0x202)];_0x1e641f++){_0x14e441[_0x1e641f]=_0x4c85eb[_0x26f39d(0x2b5)](_0x1e641f);}return{'earlyData':_0x134dbe,'error':null};}catch(_0x215af4){return{'earlyData':null,'error':_0x215af4};}}function isValidUUID(_0x3183f3){const _0x376ccb=a0_0x2fd172,_0x17d4b7=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return _0x17d4b7[_0x376ccb(0x2b8)](_0x3183f3);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x2b9c81){const _0x20b061=a0_0x2fd172;try{(_0x2b9c81['readyState']===WS_READY_STATE_OPEN||_0x2b9c81[_0x20b061(0x249)]===WS_READY_STATE_CLOSING)&&_0x2b9c81['close']();}catch(_0x1b253e){console[_0x20b061(0x2ae)]('safeCloseWebSocket\x20error:',_0x1b253e);}}const byteToHex=Array[a0_0x2fd172(0x2c6)]({'length':0x100},(_0x24bb8e,_0x1d25b6)=>(_0x1d25b6+0x100)[a0_0x2fd172(0x1f7)](0x10)[a0_0x2fd172(0x287)](0x1));function unsafeStringify(_0x11c7e5,_0x4a775c=0x0){const _0x471dd7=a0_0x2fd172;return[byteToHex[_0x11c7e5[_0x4a775c]],byteToHex[_0x11c7e5[_0x4a775c+0x1]],byteToHex[_0x11c7e5[_0x4a775c+0x2]],byteToHex[_0x11c7e5[_0x4a775c+0x3]],'-',byteToHex[_0x11c7e5[_0x4a775c+0x4]],byteToHex[_0x11c7e5[_0x4a775c+0x5]],'-',byteToHex[_0x11c7e5[_0x4a775c+0x6]],byteToHex[_0x11c7e5[_0x4a775c+0x7]],'-',byteToHex[_0x11c7e5[_0x4a775c+0x8]],byteToHex[_0x11c7e5[_0x4a775c+0x9]],'-',byteToHex[_0x11c7e5[_0x4a775c+0xa]],byteToHex[_0x11c7e5[_0x4a775c+0xb]],byteToHex[_0x11c7e5[_0x4a775c+0xc]],byteToHex[_0x11c7e5[_0x4a775c+0xd]],byteToHex[_0x11c7e5[_0x4a775c+0xe]],byteToHex[_0x11c7e5[_0x4a775c+0xf]]]['join']('')[_0x471dd7(0x2c0)]();}function stringify(_0x3a1673,_0x2564a4=0x0){const _0x1e8cc8=a0_0x2fd172,_0x547a6f=unsafeStringify(_0x3a1673,_0x2564a4);if(!isValidUUID(_0x547a6f))throw new TypeError(_0x1e8cc8(0x299));return _0x547a6f;}async function handleUDPOutBound(_0x90551c,_0x376e50,_0x4b87df){const _0x2f5375=a0_0x2fd172;let _0xbd2134=![];const _0x4ec9a5=new TransformStream({'start'(_0x35ff93){},'transform'(_0x5c3b74,_0x45da39){const _0x25de38=a0_0x337e;for(let _0x430c9c=0x0;_0x430c9c<_0x5c3b74[_0x25de38(0x24c)];){const _0x4e03d3=_0x5c3b74[_0x25de38(0x287)](_0x430c9c,_0x430c9c+0x2),_0x175803=new DataView(_0x4e03d3)['getUint16'](0x0),_0x4fcdb6=new Uint8Array(_0x5c3b74[_0x25de38(0x287)](_0x430c9c+0x2,_0x430c9c+0x2+_0x175803));_0x430c9c=_0x430c9c+0x2+_0x175803,_0x45da39['enqueue'](_0x4fcdb6);}},'flush'(_0x1778ba){}});_0x4ec9a5[_0x2f5375(0x26f)]['pipeTo'](new WritableStream({async 'write'(_0x204690){const _0x3c2631=_0x2f5375,_0x2a64ae=await fetch(dohURL,{'method':_0x3c2631(0x27d),'headers':{'content-type':_0x3c2631(0x234)},'body':_0x204690}),_0x15ad53=await _0x2a64ae[_0x3c2631(0x221)](),_0x3db98a=_0x15ad53[_0x3c2631(0x24c)],_0x57aee0=new Uint8Array([_0x3db98a>>0x8&0xff,_0x3db98a&0xff]);_0x90551c[_0x3c2631(0x249)]===WS_READY_STATE_OPEN&&(_0x4b87df(_0x3c2631(0x282)+_0x3db98a),_0xbd2134?_0x90551c[_0x3c2631(0x2a3)](await new Blob([_0x57aee0,_0x15ad53])['arrayBuffer']()):(_0x90551c[_0x3c2631(0x2a3)](await new Blob([_0x376e50,_0x57aee0,_0x15ad53])[_0x3c2631(0x221)]()),_0xbd2134=!![]));}}))['catch'](_0x2f4d80=>{_0x4b87df('dns\x20udp\x20has\x20error'+_0x2f4d80);});const _0x1642ad=_0x4ec9a5[_0x2f5375(0x227)][_0x2f5375(0x1f0)]();return{'write'(_0x2f34cd){_0x1642ad['write'](_0x2f34cd);}};}async function handleDNSQuery(_0x94283c,_0x36fec2,_0x3f212d,_0x351fff){const _0x1f955d=a0_0x2fd172;try{const _0x10320b=_0x1f955d(0x2bb),_0x5676d4=0x35;let _0x119ead=_0x3f212d;const _0x1426be=connect({'hostname':_0x10320b,'port':_0x5676d4});_0x351fff(_0x1f955d(0x29f)+_0x10320b+':'+_0x5676d4);const _0x20fef2=_0x1426be[_0x1f955d(0x227)][_0x1f955d(0x1f0)]();await _0x20fef2[_0x1f955d(0x219)](_0x94283c),_0x20fef2['releaseLock'](),await _0x1426be[_0x1f955d(0x26f)][_0x1f955d(0x1f6)](new WritableStream({async 'write'(_0x55c27a){const _0x44d200=_0x1f955d;_0x36fec2['readyState']===WS_READY_STATE_OPEN&&(_0x119ead?(_0x36fec2['send'](await new Blob([_0x119ead,_0x55c27a])[_0x44d200(0x221)]()),_0x119ead=null):_0x36fec2[_0x44d200(0x2a3)](_0x55c27a));},'close'(){const _0x57d5a1=_0x1f955d;_0x351fff(_0x57d5a1(0x247)+_0x10320b+_0x57d5a1(0x258));},'abort'(_0x3afdb1){const _0x14a68d=_0x1f955d;console[_0x14a68d(0x2ae)]('dns\x20server('+_0x10320b+_0x14a68d(0x20e),_0x3afdb1);}}));}catch(_0x550bc6){console[_0x1f955d(0x2ae)](_0x1f955d(0x22e)+_0x550bc6[_0x1f955d(0x2ba)]);}}async function socks5Connect(_0x33f139,_0xc3fefa,_0x15dcc8,_0xaae64d){const _0x13aaff=a0_0x2fd172,{username:_0x446e24,password:_0x388b86,hostname:_0x51e96d,port:_0x3e2a43}=parsedSocks5Address,_0x5ee82a=connect({'hostname':_0x51e96d,'port':_0x3e2a43}),_0x544159=new Uint8Array([0x5,0x2,0x0,0x2]),_0xadc34e=_0x5ee82a[_0x13aaff(0x227)][_0x13aaff(0x1f0)]();await _0xadc34e[_0x13aaff(0x219)](_0x544159),_0xaae64d(_0x13aaff(0x2ad));const _0x9780fb=_0x5ee82a['readable']['getReader'](),_0x595030=new TextEncoder();let _0x4dfce3=(await _0x9780fb['read']())[_0x13aaff(0x230)];if(_0x4dfce3[0x0]!==0x5){_0xaae64d(_0x13aaff(0x231)+_0x4dfce3[0x0]+_0x13aaff(0x224));return;}if(_0x4dfce3[0x1]===0xff){_0xaae64d(_0x13aaff(0x257));return;}if(_0x4dfce3[0x1]===0x2){_0xaae64d('socks\x20server\x20needs\x20auth');if(!_0x446e24||!_0x388b86){_0xaae64d(_0x13aaff(0x280));return;}const _0x4efb35=new Uint8Array([0x1,_0x446e24['length'],..._0x595030[_0x13aaff(0x25d)](_0x446e24),_0x388b86[_0x13aaff(0x202)],..._0x595030['encode'](_0x388b86)]);await _0xadc34e['write'](_0x4efb35),_0x4dfce3=(await _0x9780fb['read']())[_0x13aaff(0x230)];if(_0x4dfce3[0x0]!==0x1||_0x4dfce3[0x1]!==0x0){_0xaae64d(_0x13aaff(0x2b9));return;}}let _0x2b25d5;switch(_0x33f139){case 0x1:_0x2b25d5=new Uint8Array([0x1,..._0xc3fefa['split']('.')[_0x13aaff(0x285)](Number)]);break;case 0x2:_0x2b25d5=new Uint8Array([0x3,_0xc3fefa[_0x13aaff(0x202)],..._0x595030[_0x13aaff(0x25d)](_0xc3fefa)]);break;case 0x3:_0x2b25d5=new Uint8Array([0x4,..._0xc3fefa[_0x13aaff(0x2b6)](':')['flatMap'](_0x19ab62=>[parseInt(_0x19ab62[_0x13aaff(0x287)](0x0,0x2),0x10),parseInt(_0x19ab62[_0x13aaff(0x287)](0x2),0x10)])]);break;default:_0xaae64d(_0x13aaff(0x20b)+_0x33f139);return;}const _0x7a5da0=new Uint8Array([0x5,0x1,0x0,..._0x2b25d5,_0x15dcc8>>0x8,_0x15dcc8&0xff]);await _0xadc34e[_0x13aaff(0x219)](_0x7a5da0),_0xaae64d(_0x13aaff(0x238)),_0x4dfce3=(await _0x9780fb['read']())[_0x13aaff(0x230)];if(_0x4dfce3[0x1]===0x0)_0xaae64d(_0x13aaff(0x26e));else{_0xaae64d('fail\x20to\x20open\x20socks\x20connection');return;}return _0xadc34e[_0x13aaff(0x2c3)](),_0x9780fb[_0x13aaff(0x2c3)](),_0x5ee82a;}function socks5AddressParser(_0x68e3c0){const _0x3cea82=a0_0x2fd172;let [_0x3e8d18,_0x467bab]=_0x68e3c0['split']('@')[_0x3cea82(0x28a)](),_0x30f6e6,_0x508354,_0x486bb9,_0x39ee5a;if(_0x467bab){const _0x2aca3b=_0x467bab[_0x3cea82(0x2b6)](':');if(_0x2aca3b[_0x3cea82(0x202)]!==0x2)throw new Error('Invalid\x20SOCKS\x20address\x20format');[_0x30f6e6,_0x508354]=_0x2aca3b;}const _0x43d719=_0x3e8d18[_0x3cea82(0x2b6)](':');_0x39ee5a=Number(_0x43d719[_0x3cea82(0x212)]());if(isNaN(_0x39ee5a))throw new Error(_0x3cea82(0x245));_0x486bb9=_0x43d719[_0x3cea82(0x290)](':');const _0x4f9afe=/^\[.*\]$/;if(_0x486bb9[_0x3cea82(0x2ca)](':')&&!_0x4f9afe[_0x3cea82(0x2b8)](_0x486bb9))throw new Error(_0x3cea82(0x245));return{'username':_0x30f6e6,'password':_0x508354,'hostname':_0x486bb9,'port':_0x39ee5a};}async function parseTrojanHeader(_0x1fa47e){const _0x582207=a0_0x2fd172;if(_0x1fa47e[_0x582207(0x24c)]<0x3a)return{'hasError':!![],'message':_0x582207(0x208)};const _0x41fef7=new DataView(_0x1fa47e);if(_0x41fef7['getUint8'](0x38)!==0xd||_0x41fef7['getUint8'](0x39)!==0xa)return{'hasError':!![],'message':_0x582207(0x263)};const _0x57b0a8=new TextDecoder()[_0x582207(0x24b)](_0x1fa47e[_0x582207(0x287)](0x0,0x38));if(_0x57b0a8!==Sha256[_0x582207(0x2ac)](userID))return{'hasError':!![],'message':_0x582207(0x26b)};const _0x1d2fd5=new DataView(_0x1fa47e,0x3a);if(_0x1d2fd5[_0x582207(0x24c)]<0x6)return{'hasError':!![],'message':_0x582207(0x2d1)};if(_0x1d2fd5['getUint8'](0x0)!==0x1)return{'hasError':!![],'message':'Unsupported\x20command,\x20only\x20TCP\x20(CONNECT)\x20is\x20allowed'};const _0x16ede2=_0x1d2fd5['getUint8'](0x1);let _0x68af34,_0x289d2c;switch(_0x16ede2){case 0x1:_0x68af34=Array['from'](new Uint8Array(_0x1d2fd5[_0x582207(0x215)],_0x1d2fd5[_0x582207(0x23a)]+0x2,0x4))['join']('.'),_0x289d2c=0x6;break;case 0x3:const _0x5f1390=_0x1d2fd5[_0x582207(0x21a)](0x2);_0x68af34=new TextDecoder()[_0x582207(0x24b)](_0x1d2fd5[_0x582207(0x215)][_0x582207(0x287)](_0x1d2fd5['byteOffset']+0x3,_0x1d2fd5['byteOffset']+0x3+_0x5f1390)),_0x289d2c=0x3+_0x5f1390;break;case 0x4:_0x68af34=Array[_0x582207(0x2c6)](new Uint8Array(_0x1d2fd5[_0x582207(0x215)],_0x1d2fd5['byteOffset']+0x2,0x10))[_0x582207(0x285)](_0x12067c=>_0x12067c[_0x582207(0x1f7)](0x10)[_0x582207(0x276)](0x2,'0'))[_0x582207(0x290)](':')[_0x582207(0x277)](/(:0)+:/,'::'),_0x289d2c=0x12;break;default:return{'hasError':!![],'message':_0x582207(0x2cf)+_0x16ede2};}const _0x5a2db2=_0x1d2fd5['getUint16'](_0x289d2c);return{'hasError':![],'address':_0x68af34,'port':_0x5a2db2,'data':_0x1fa47e[_0x582207(0x287)](0x3a+_0x289d2c+0x2)};}const VlessCmd={'TCP':0x1,'UDP':0x2,'MUX':0x3},VlessAddrType={'IPv4':0x1,'DomainName':0x2,'IPv6':0x3};function makeVlessReqHeader(_0x42a4a3,_0x1c1955,_0x434ab3,_0x1aab2e,_0x4ec97e){const _0x4a6cb8=a0_0x2fd172;let _0x52c785,_0x2fdc16;switch(_0x1c1955){case VlessAddrType[_0x4a6cb8(0x248)]:_0x52c785=0x4;break;case VlessAddrType['DomainName']:_0x2fdc16=new TextEncoder()[_0x4a6cb8(0x25d)](_0x434ab3),_0x52c785=_0x2fdc16[_0x4a6cb8(0x202)]+0x1;break;case VlessAddrType['IPv6']:_0x52c785=0x10;break;default:throw new Error(_0x4a6cb8(0x27e)+_0x1c1955);}const _0x46ef9b=_0x4ec97e[_0x4a6cb8(0x277)](/-/g,''),_0x16966f=0x1,_0x53c16e=new Uint8Array(0x16+_0x52c785);_0x53c16e[0x0]=0x0;for(let _0x27f14c=0x0;_0x27f14c<_0x46ef9b[_0x4a6cb8(0x202)];_0x27f14c+=0x2){_0x53c16e[_0x16966f+_0x27f14c/0x2]=parseInt(_0x46ef9b[_0x4a6cb8(0x236)](_0x27f14c,0x2),0x10);}_0x53c16e[0x11]=0x0,_0x53c16e[0x12]=_0x42a4a3,_0x53c16e[0x13]=_0x1aab2e>>0x8,_0x53c16e[0x14]=_0x1aab2e&0xff,_0x53c16e[0x15]=_0x1c1955;switch(_0x1c1955){case VlessAddrType[_0x4a6cb8(0x248)]:const _0xbc430a=_0x434ab3[_0x4a6cb8(0x2b6)]('.');for(let _0x508f82=0x0;_0x508f82<0x4;_0x508f82++){_0x53c16e[0x16+_0x508f82]=parseInt(_0xbc430a[_0x508f82]);}break;case VlessAddrType[_0x4a6cb8(0x298)]:_0x53c16e[0x16]=_0x2fdc16[_0x4a6cb8(0x202)],_0x53c16e[_0x4a6cb8(0x205)](_0x2fdc16,0x17);break;case VlessAddrType[_0x4a6cb8(0x2b2)]:const _0x34f709=ipv6[_0x4a6cb8(0x2b6)](':');for(let _0x2cc6a6=0x0;_0x2cc6a6<0x8;_0x2cc6a6++){const _0xe28fd8=parseInt(_0x34f709[_0x2cc6a6],0x10);_0x53c16e[_0x2cc6a6*0x2+0x16]=_0xe28fd8>>0x8,_0x53c16e[_0x2cc6a6*0x2+0x17]=_0xe28fd8&0xff;}break;default:throw new Error(_0x4a6cb8(0x27e)+_0x1c1955);}return _0x53c16e;}function checkVlessConfig(_0x73fcdc,_0xb366f9){const _0xc9acc4=a0_0x2fd172;if(_0xb366f9[_0xc9acc4(0x26d)]!=='ws')throw new Error(_0xc9acc4(0x2ce)+_0xb366f9[_0xc9acc4(0x26d)]+',\x20has\x20to\x20be\x20ws\x20(Websocket)');if(_0xb366f9['security']!=='tls'&&_0xb366f9[_0xc9acc4(0x1f5)]!==_0xc9acc4(0x240))throw new Error('Usupported\x20security\x20layer:\x20'+_0xb366f9[_0xc9acc4(0x26d)]+_0xc9acc4(0x269));if(_0xb366f9['wsSettings']&&_0xb366f9[_0xc9acc4(0x242)][_0xc9acc4(0x228)]&&_0xb366f9[_0xc9acc4(0x242)][_0xc9acc4(0x228)]['Host']!==_0x73fcdc)throw new Error(_0xc9acc4(0x272));if(_0xb366f9['tlsSettings']&&_0xb366f9[_0xc9acc4(0x217)][_0xc9acc4(0x201)]!==_0x73fcdc)throw new Error('The\x20SNI\x20is\x20different\x20from\x20the\x20server\x20address,\x20this\x20is\x20unsupported\x20due\x20to\x20Cloudflare\x20API\x20restrictions');}function parseVlessString(_0x1b316b){const _0x4d9dba=a0_0x2fd172,_0x44d7cb=/^(.+):\/\/(.+?)@(.+?):(\d+)(\?[^#]*)?(#.*)?$/,_0x4f0fae=_0x1b316b['match'](_0x44d7cb);if(!_0x4f0fae)throw new Error(_0x4d9dba(0x28e));const [,_0x22b318,_0x4dfde1,_0x56c261,_0x2f94d2,_0x45e0a1,_0x4dae01]=_0x4f0fae,_0x4bb7c3={'protocol':_0x22b318,'uuid':_0x4dfde1,'remoteHost':_0x56c261,'remotePort':parseInt(_0x2f94d2),'descriptiveText':_0x4dae01?_0x4dae01[_0x4d9dba(0x28f)](0x1):'','queryParams':{}};if(_0x45e0a1){const _0x2a61fe=_0x45e0a1['substring'](0x1)[_0x4d9dba(0x2b6)]('&');_0x2a61fe['forEach'](_0x159572=>{const _0x1feed3=_0x4d9dba,[_0x55d9ba,_0x17e319]=_0x159572[_0x1feed3(0x2b6)]('=');_0x4bb7c3[_0x1feed3(0x222)][_0x55d9ba]=_0x17e319;});}return _0x4bb7c3;}const at=a0_0x2fd172(0x2ab),pt='dmxlc3M=',ed=a0_0x2fd172(0x286);function getConfig(_0xecf751,_0x34fd61){const _0x25dcc6=a0_0x2fd172,_0x58025f=':443?encryption=none&security=tls&sni='+_0x34fd61+'&fp=randomized&type=ws&host='+_0x34fd61+_0x25dcc6(0x25f)+_0x34fd61,_0x1edc25=_0xecf751[_0x25dcc6(0x2b6)](','),_0x353c91='https://'+_0x34fd61+'/sub/'+_0x1edc25[0x0]+_0x25dcc6(0x262),_0x4df709=_0x25dcc6(0x283)+_0x34fd61+_0x25dcc6(0x292)+_0x1edc25[0x0],_0x468afd=_0x25dcc6(0x24e)+encodeURIComponent(_0x353c91)+_0x25dcc6(0x21b),_0x2e59b6=_0x25dcc6(0x22f)+_0x34fd61+'/\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:image\x27\x20content=\x27https://ipfs.io/ipfs/bafybeigd6i5aavwpr6wvnwuyayklq3omonggta4x2q7kpmgafj357nkcky\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20name=\x27twitter:card\x27\x20content=\x27summary_large_image\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20name=\x27twitter:title\x27\x20content=\x27EDtunnel\x20-\x20Protocol\x20Configuration\x20and\x20Subscribe\x20Output\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20name=\x27twitter:description\x27\x20content=\x27Use\x20Cloudflare\x20Pages\x20and\x20Worker\x20serverless\x20to\x20implement\x20protocol\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20name=\x27twitter:url\x27\x20content=\x27https://'+_0x34fd61+'/\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20name=\x27twitter:image\x27\x20content=\x27https://ipfs.io/ipfs/bafybeigd6i5aavwpr6wvnwuyayklq3omonggta4x2q7kpmgafj357nkcky\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:image:width\x27\x20content=\x271500\x27\x20/>\x0a\x20\x20\x20\x20<meta\x20property=\x27og:image:height\x27\x20content=\x271500\x27\x20/>\x0a\x0a\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Roboto\x27,\x20\x27Segoe\x20UI\x27,\x20Tahoma,\x20Geneva,\x20Verdana,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#000000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x201.6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x201200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#111111;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x206px\x20rgba(255,\x20255,\x20255,\x200.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20h1,\x20h2\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.config-item\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#222222;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#333333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.config-item\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s,\x20color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#cccccc;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.btn-group\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.btn-group\x20.btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20pre\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20white-space:\x20pre-wrap;\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#00ff00;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.logo\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20float:\x20left;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x09\x09max-width:\x2030%;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20.logo\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x2090%;\x20/*\x20Adjust\x20the\x20max-width\x20to\x20fit\x20within\x20the\x20container\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-group\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-group\x20.btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.code-container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.code-container\x20pre\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding-right:\x20100px;\x20/*\x20Make\x20space\x20for\x20the\x20button\x20*/\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.copy-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x200.8em;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.subscription-info\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#222222;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.subscription-info\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffffff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.subscription-info\x20ul\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding-left:\x2020px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20.subscription-info\x20li\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20<link\x20rel=\x22stylesheet\x22\x20href=\x22https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\x22>\x0a\x20\x20</head>\x0a\x20\x20',_0x2c4c01=_0x25dcc6(0x28d)+_0x34fd61+_0x25dcc6(0x23c)+_0x1edc25[0x0]+'\x22\x20class=\x22btn\x22\x20target=\x22_blank\x22><i\x20class=\x22fas\x20fa-link\x22></i>\x20VLESS\x20Subscription</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22clash://install-config?url='+encodeURIComponent(_0x25dcc6(0x283)+_0x34fd61+_0x25dcc6(0x23c)+_0x1edc25[0x0]+_0x25dcc6(0x262))+'\x22\x20class=\x22btn\x22\x20target=\x22_blank\x22><i\x20class=\x22fas\x20fa-bolt\x22></i>\x20Clash\x20Subscription</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x468afd+'\x22\x20class=\x22btn\x22\x20target=\x22_blank\x22><i\x20class=\x22fas\x20fa-bolt\x22></i>\x20Clash\x20Link</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x4df709+_0x25dcc6(0x295),_0x420059=_0x1edc25[_0x25dcc6(0x285)](_0x57726f=>{const _0xbb2357=_0x25dcc6,_0x7fa317=atob(pt)+'://'+_0x57726f+atob(at)+_0x34fd61+_0x58025f,_0x1ca5b9=atob(pt)+'://'+_0x57726f+atob(at)+proxyIP+_0x58025f;return _0xbb2357(0x2c4)+_0x57726f+_0xbb2357(0x207)+_0x7fa317+_0xbb2357(0x2c5)+_0x7fa317+_0xbb2357(0x2c1)+_0x1ca5b9+_0xbb2357(0x2c5)+_0x1ca5b9+_0xbb2357(0x27b);})['join']('');return _0x25dcc6(0x2b1)+_0x2e59b6+_0x25dcc6(0x28b)+_0x2c4c01+'\x0a\x20\x20\x20\x20'+_0x420059+_0x25dcc6(0x25e);}const HttpPort=new Set([0x50,0x1f90,0x22b0,0x804,0x826,0x82f,0x822]),HttpsPort=new Set([0x1bb,0x20fb,0x805,0x830,0x827,0x823]);function GenSub(_0x401ca8,_0x1a8f43){const _0x4f7016=a0_0x2fd172,_0x3c860f=_0x401ca8[_0x4f7016(0x2ca)](',')?_0x401ca8[_0x4f7016(0x2b6)](','):[_0x401ca8],_0x1d3200=()=>'/'+Math[_0x4f7016(0x296)]()[_0x4f7016(0x1f7)](0x24)[_0x4f7016(0x28f)](0x2,0xf)+_0x4f7016(0x24a),_0x313d87='?encryption=none&security=none&fp=random&type=ws&host='+_0x1a8f43+'&path='+encodeURIComponent(_0x1d3200())+'#',_0x6a3b75='?encryption=none&security=tls&sni='+_0x1a8f43+_0x4f7016(0x1fe)+_0x1a8f43+_0x4f7016(0x25f),_0x460eba=_0x3c860f[_0x4f7016(0x1ff)](_0x4ef481=>{const _0x40f26e=_0x4f7016,_0x46c7d6=Array['from'](HttpPort)[_0x40f26e(0x1ff)](_0x368943=>{const _0x282d7c=_0x40f26e;if(!_0x1a8f43[_0x282d7c(0x2ca)]('pages.dev')){const _0x2b1129=_0x1a8f43+'-HTTP-'+_0x368943,_0x1936a6=atob(pt)+'://'+_0x4ef481+atob(at)+_0x1a8f43+':'+_0x368943+_0x313d87+_0x2b1129;return proxyIPs[_0x282d7c(0x1ff)](_0x9610db=>{const _0x1ec70b=_0x282d7c,_0x3e42e7=atob(pt)+_0x1ec70b(0x1fb)+_0x4ef481+atob(at)+_0x9610db+':'+_0x368943+_0x313d87+_0x2b1129+'-'+_0x9610db+'-'+atob(ed);return[_0x1936a6,_0x3e42e7];});}return[];}),_0x165b78=Array['from'](HttpsPort)[_0x40f26e(0x1ff)](_0x59f68d=>{const _0x47d01f=_0x40f26e,_0x27df96=_0x1a8f43+_0x47d01f(0x264)+_0x59f68d,_0x309cec=atob(pt)+_0x47d01f(0x1fb)+_0x4ef481+atob(at)+_0x1a8f43+':'+_0x59f68d+_0x6a3b75+_0x27df96;return proxyIPs[_0x47d01f(0x1ff)](_0x7d2adb=>{const _0x4237ee=_0x47d01f,_0x4fcd14=atob(pt)+_0x4237ee(0x1fb)+_0x4ef481+atob(at)+_0x7d2adb+':'+_0x59f68d+_0x6a3b75+_0x27df96+'-'+_0x7d2adb+'-'+atob(ed);return[_0x309cec,_0x4fcd14];});});return[..._0x46c7d6,..._0x165b78];});return _0x460eba[_0x4f7016(0x290)]('\x0a');}const hostnames=[a0_0x2fd172(0x256),a0_0x2fd172(0x250),a0_0x2fd172(0x29a),a0_0x2fd172(0x274),a0_0x2fd172(0x2c2),a0_0x2fd172(0x2c9),a0_0x2fd172(0x2b3),'www.tmall.com',a0_0x2fd172(0x22a),a0_0x2fd172(0x27a),a0_0x2fd172(0x20a),a0_0x2fd172(0x25b),a0_0x2fd172(0x2a8),a0_0x2fd172(0x246),'www.toutiao.com','www.ifeng.com','www.autohome.com.cn',a0_0x2fd172(0x2a7),a0_0x2fd172(0x2a5),'www.kuaidi100.com','www.wechat.com',a0_0x2fd172(0x2bc),a0_0x2fd172(0x210),a0_0x2fd172(0x27f),a0_0x2fd172(0x253),'www.mgtv.com',a0_0x2fd172(0x243),a0_0x2fd172(0x29c),a0_0x2fd172(0x226),'www.youth.cn',a0_0x2fd172(0x1f4),a0_0x2fd172(0x2a1),a0_0x2fd172(0x24d),a0_0x2fd172(0x22d),a0_0x2fd172(0x209),'www.toutiao.io',a0_0x2fd172(0x2cb),a0_0x2fd172(0x20f),a0_0x2fd172(0x252),'www.zhibo8.cc',a0_0x2fd172(0x21e),a0_0x2fd172(0x1f9),'www.qqgongyi.com',a0_0x2fd172(0x21c),a0_0x2fd172(0x28c),'www.suning.com',a0_0x2fd172(0x1fd),a0_0x2fd172(0x2b4),a0_0x2fd172(0x23e),a0_0x2fd172(0x2c8),a0_0x2fd172(0x204),a0_0x2fd172(0x1f8),a0_0x2fd172(0x266),a0_0x2fd172(0x1fc),a0_0x2fd172(0x2cc),a0_0x2fd172(0x25a),a0_0x2fd172(0x265),a0_0x2fd172(0x1f3),a0_0x2fd172(0x21d),a0_0x2fd172(0x216),a0_0x2fd172(0x1f2),a0_0x2fd172(0x29d),a0_0x2fd172(0x261),a0_0x2fd172(0x294),a0_0x2fd172(0x220),'www.dianyou.cn',a0_0x2fd172(0x260),a0_0x2fd172(0x2a8),'www.guancha.cn',a0_0x2fd172(0x2a2),'www.58.com',a0_0x2fd172(0x223),a0_0x2fd172(0x214),a0_0x2fd172(0x2cd)];